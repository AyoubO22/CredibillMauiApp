<Shell
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:customers="clr-namespace:CredibillMauiApp.Views.Customers"
    xmlns:invoices="clr-namespace:CredibillMauiApp.Views.Invoices"
    xmlns:payments="clr-namespace:CredibillMauiApp.Views.Payments"
    xmlns:auth="clr-namespace:CredibillMauiApp.Views"
    x:Class="CredibillMauiApp.AppShell"
    FlyoutBehavior="Disabled">

    <Shell.Resources>
        <Style TargetType="Element">
            <Setter Property="Shell.ForegroundColor" Value="{AppThemeBinding Light=#1C1C1E, Dark=White}" />
            <Setter Property="Shell.TitleColor" Value="{AppThemeBinding Light=#1C1C1E, Dark=White}" />
            <Setter Property="Shell.BackgroundColor" Value="{AppThemeBinding Light=White, Dark=#1C1C1E}" />
            <Setter Property="Shell.FlyoutBackgroundColor" Value="{AppThemeBinding Light=#F5F7FB, Dark=#1C1C1E}" />
        </Style>
    </Shell.Resources>

    <Shell.FlyoutHeader>
        <Grid Padding="20" BackgroundColor="#2D5CFE">
            <VerticalStackLayout>
                <Label Text="Credibill" FontSize="24" FontAttributes="Bold" TextColor="White" />
                <Label Text="Welcome" FontSize="14" TextColor="#E6E9FF" />
            </VerticalStackLayout>
        </Grid>
    </Shell.FlyoutHeader>

    <!-- Auth choice page (start here) -->
    <ShellContent Route="auth" ContentTemplate="{DataTemplate auth:AuthChoicePage}" />

    <!-- Tabs aprÃ¨s login -->
    <TabBar Route="main">
        <ShellContent Title="Customers" Route="customers" ContentTemplate="{DataTemplate customers:CustomersPage}">
            <ShellContent.Icon>
                <FileImageSource File="tab_customers.svg" />
            </ShellContent.Icon>
        </ShellContent>
        <ShellContent Title="Invoices" Route="invoices" ContentTemplate="{DataTemplate invoices:InvoicesPage}">
            <ShellContent.Icon>
                <FileImageSource File="tab_invoices.svg" />
            </ShellContent.Icon>
        </ShellContent>
        <ShellContent Title="Payments" Route="payments" ContentTemplate="{DataTemplate payments:PaymentsPage}">
            <ShellContent.Icon>
                <FileImageSource File="tab_payments.svg" />
            </ShellContent.Icon>
        </ShellContent>
    </TabBar>

    <!-- Routes for navigation (aligned to usage) -->
    <ShellContent Route="customerdetails" ContentTemplate="{DataTemplate customers:CustomerDetailPage}" />
    <ShellContent Route="customeredit" ContentTemplate="{DataTemplate customers:CustomerEditPage}" />
    <ShellContent Route="invoicedetails" ContentTemplate="{DataTemplate invoices:InvoiceDetailPage}" />
    <ShellContent Route="invoiceedit" ContentTemplate="{DataTemplate invoices:InvoiceEditPage}" />
    <ShellContent Route="paymentdetails" ContentTemplate="{DataTemplate payments:PaymentDetailPage}" />
    <ShellContent Route="paymentedit" ContentTemplate="{DataTemplate payments:PaymentEditPage}" />
    <ShellContent Route="privacypolicy" ContentTemplate="{DataTemplate auth:PrivacyPolicyPage}" />

    <!-- Flyout footer actions (enabled after login) -->
    <Shell.FlyoutFooter>
        <Grid Padding="12" ColumnDefinitions="*,Auto" BackgroundColor="#F5F7FB">
            <Button Text="Privacy Policy" Clicked="OnPrivacyClicked" BackgroundColor="#E8ECF8" TextColor="#2D5CFE" CornerRadius="8" />
            <Button Grid.Column="1" Text="Sign out" Clicked="OnSignOutClicked" BackgroundColor="#FFE8E8" TextColor="#C62828" CornerRadius="8" Margin="10,0,0,0" />
        </Grid>
    </Shell.FlyoutFooter>
</Shell>
